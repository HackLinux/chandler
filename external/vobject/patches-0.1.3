Index: vobject-0.1.3/vobject/vobject.py
===================================================================
--- vobject-0.1.3/vobject/vobject.py	(revision 88)
+++ vobject-0.1.3/vobject/vobject.py	(working copy)
@@ -210,7 +210,10 @@
             self.value = str(self.value).decode('quoted-printable')
 
     def __eq__(self, other):
-        return (self.name == other.name) and (self.params == other.params) and (self.value == other.value)
+        try:
+            return (self.name == other.name) and (self.params == other.params) and (self.value == other.value)
+        except:
+            return False
 
     def __str__(self):
         def out(s): return unicode(s).encode('ascii', 'replace')
Index: vobject-0.1.3/vobject/icalendar.py
===================================================================
--- vobject-0.1.3/vobject/icalendar.py	(revision 88)
+++ vobject-0.1.3/vobject/icalendar.py	(working copy)
@@ -306,7 +306,7 @@
             setattr(self.rruleset, '_' + key, newlist)
         if getattr(self, 'dtstart', None):
             olddt=self.getDtstart()
-            self.dtstart=[]
+            self.dtstart=[] # erase any existing dtstart contentline
             for i in xrange(len(self.rdate)):
                 if self.rdate[i] == olddt: del self.rdate[i]
         self.add(ContentLine('DTSTART', [], dt, isNative=True))
@@ -450,6 +450,7 @@
             if obj.value.tzinfo is None:
                 obj.params['X-VOBJ-FLOATINGTIME-ALLOWED'] = ['TRUE']
             if obj.params.has_key('TZID'): del obj.params['TZID']
+        # TODO need to deal with preserving timezones
         return obj
 
     def transformFromNative(cls, obj):
@@ -559,13 +560,13 @@
         if len(getattr(obj, 'version', [])) == 0:
             obj.add(ContentLine('VERSION', [], '2.0'))
         tzidsUsed = {}
-        
+
         def findTzids(obj, table):
             if isinstance(obj, ContentLine):
                 if obj.params.get('TZID'):
                     table[obj.params.get('TZID')[0]]=1
                 elif obj.params.get('X-VOBJ-PRESERVE-TZID'):
-                    tzinfo = getattr(obj.value, 'tzinfo')
+                    tzinfo = getattr(obj.value, 'tzinfo', None)
                     tzid = TimezoneComponent.pickTzid(tzinfo)
                     if tzid: table[tzid]=1
             if isinstance(obj, RecurringComponent):
@@ -575,7 +576,7 @@
                 if obj.name is not 'VTIMEZONE': findTzids(child, table)
         
         findTzids(obj, tzidsUsed)
-        oldtzids = [x.tzid[0] for x in getattr(obj, 'vtimezone', [])]
+        oldtzids = [x.tzid[0].value for x in getattr(obj, 'vtimezone', [])]
         for tzid in tzidsUsed.keys():
             if oldtzids.index(tzid) >= 0: continue
             obj.add(TimezoneComponent(tzinfo=registry.getTzid(tzid)))
@@ -587,6 +588,7 @@
     hasNative = True
     isComponent = True
     description = 'A grouping of component properties that defines a time zone.'
+    sortFirst = ['tzid', 'last-modified', 'tzurl', 'standard', 'daylight']
     knownChildren = {'TZID':         (1, 1, None),#min, max, behaviorRegistry id
                      'LAST-MODIFIED':(0, 1, None),
                      'TZURL':        (0, 1, None),
