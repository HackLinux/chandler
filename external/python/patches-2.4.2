--- Python-2.4.2/Mac/OSX/Makefile	2005-01-06 14:33:55.000000000 -0800
+++ Python-2.4.2-patched/Mac/OSX/Makefile	2005-12-12 14:13:13.000000000 -0800
@@ -59,8 +59,7 @@
 compileall=$(srcdir)/Lib/compileall.py
 bundlebuilder=$(srcdir)/Lib/plat-mac/bundlebuilder.py
 
-installapps: install_PythonLauncher install_Python install_BuildApplet install_IDE \
-	install_IDLE install_PackageManager checkapplepython
+installapps: install_Python
 
 install_PythonLauncher:
 	cd $(srcdir)/Mac/OSX/PythonLauncher/PythonLauncher.pbproj ; \
--- Python-2.4.2/PC/getpathp.c	2005-07-22 14:48:51.000000000 -0700
+++ Python-2.4.2-patched/PC/getpathp.c	2005-12-12 14:13:13.000000000 -0800
@@ -489,8 +489,13 @@
 	}
  
 	skiphome = pythonhome==NULL ? 0 : 1;
-	machinepath = getpythonregpath(HKEY_LOCAL_MACHINE, skiphome);
-	userpath = getpythonregpath(HKEY_CURRENT_USER, skiphome);
+#if 0
+        /* Chandler doesn't want to grab registry info because we want to
+         * ignore extensions that the user already has installed.
+         */
+        machinepath = getpythonregpath(HKEY_LOCAL_MACHINE, skiphome);
+        userpath = getpythonregpath(HKEY_CURRENT_USER, skiphome);
+#endif
 	/* We only use the default relative PYTHONPATH if we havent
 	   anything better to use! */
 	skipdefault = envpath!=NULL || pythonhome!=NULL || \
--- Python-2.4.2/configure	2005-08-07 14:08:42.000000000 -0700
+++ Python-2.4.2-patched/configure	2005-12-12 14:13:13.000000000 -0800
@@ -10208,6 +10208,14 @@
   Darwin/[01234567].*)
     OTHER_LIBTOOL_OPT="-prebind -seg1addr 0x10000000"
     ;;
+  Darwin/8.*)
+    OTHER_LIBTOOL_OPT=""
+    if test "${with_pydebug+set}" = set; then
+      if test "$with_pydebug" != no; then
+        OTHER_LIBTOOL_OPT="-undefined dynamic_lookup"
+      fi
+    fi
+    ;;
   Darwin/*)
     OTHER_LIBTOOL_OPT=""
     ;;
--- Python-2.4.2/Makefile.pre.in	2005-03-28 15:23:01.000000000 -0800
+++ Python-2.4.2-patched/Makefile.pre.in	2006-01-04 13:05:38.000000000 -0800
@@ -660,7 +660,7 @@
 LIBSUBDIRS=	lib-old lib-tk site-packages test test/output test/data \
 		test/decimaltestdata \
 		encodings email email/test email/test/data compiler hotshot \
-		logging bsddb bsddb/test csv idlelib idlelib/Icons \
+		logging csv idlelib idlelib/Icons \
 		distutils distutils/command distutils/tests $(XMLLIBSUBDIRS) \
 		curses $(MACHDEPS)
 libinstall:	$(BUILDPYTHON) $(srcdir)/Lib/$(PLATDIR)
--- Python-2.4.2/setup.py	2005-03-09 14:27:24.000000000 -0800
+++ Python-2.4.2-patched/setup.py	2006-01-10 22:40:03.970713392 -0800
@@ -420,9 +420,13 @@
             # Read SGI RGB image files (but coded portably)
             exts.append( Extension('rgbimg', ['rgbimgmodule.c']) )
 
         # readline
-        if self.compiler.find_library_file(lib_dirs, 'readline'):
+        build_root   = os.path.join(os.environ.get('BUILD_ROOT'), os.environ.get('SNAP'))
+        readline_inc = [os.path.join(build_root, 'include')]
+        readline_lib = [os.path.join(build_root, 'lib')]
+
+        if self.compiler.find_library_file(lib_dirs + readline_lib, 'readline'):
             readline_libs = ['readline']
             if self.compiler.find_library_file(lib_dirs,
                                                  'ncurses'):
                 readline_libs.append('ncurses')
@@ -432,10 +436,13 @@
                                                ['/usr/lib/termcap'],
                                                'termcap'):
                 readline_libs.append('termcap')
             exts.append( Extension('readline', ['readline.c'],
-                                   library_dirs=['/usr/lib/termcap'],
+                                   library_dirs=['/usr/lib/termcap', 
+                                                 os.path.join(build_root, 'lib')],
+                                   include_dirs=readline_inc,
                                    libraries=readline_libs) )
+
         if platform not in ['mac']:
             # crypt module.
 
             if self.compiler.find_library_file(lib_dirs, 'crypt'):
@@ -488,10 +495,10 @@
         # of available releases can be found at
         #
         # http://www.sleepycat.com/update/index.html
 
-        max_db_ver = (4, 3)
-        min_db_ver = (3, 2)
+        max_db_ver = (0, 0)
+        min_db_ver = (0, 0)
         db_setup_debug = False   # verbose debug prints from this script?
 
         # construct a list of paths to look for the header file in on
         # top of the normal inc_dirs.
